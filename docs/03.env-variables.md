# í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš© 


## í´ë” ìƒì„± 
í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— env ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“­ë‹ˆë‹¤. ê·¸ ì•„ë˜ env íŒŒì¼ì„ ë‹¤ìŒê³¼ ê°™ì´ ë§Œë“­ë‹ˆë‹¤. 
```shell
ğŸ“‚project
â”œâ”€ğŸ“‚build  # output ë””ë ‰í† ë¦¬ 
â”œâ”€ğŸ“‚env    # í™˜ê²½ ë³€ìˆ˜ íŒŒì¼ë“¤ 
â”‚ â”œâ”€ğŸ“„.env # ë””í´íŠ¸ 
â”‚ â”œâ”€ğŸ“„.env.development # ê°œë°œì„œë²„ 
â”‚ â”œâ”€ğŸ“„.env.local # local í™˜ê²½ 
â”‚ â”œâ”€ğŸ“„.env.production  # ìš´ì˜ì„œë²„ 
â”œâ”€ğŸ“„package.json 
```

## env íŒŒì¼ í”„ëŸ¬í¼í‹° ì •ì˜ 
ê° env íŒŒì¼ì— ë‹¤ìŒê³¼ ê°™ì´ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
* ì‹¤ì œëŠ”  í™˜ê²½ì— ë”°ë¼ ê°’ì´ ë‹¤ë¦…ë‹ˆë‹¤. 

```properties
# Private Environment Variables
NODE_ENV=development
DATABASE_URL=postgres://user:password@localhost:5432/mydb-development

# Public Environment Variables
# Clinet Sideì—ì„œ ì½ìœ¼ë ¤ë©´ PUBLICì„  ì•ì— ë¶™ì—¬ì•¼ 
PUBLIC_TUTORIAL_API_PROTOCOL=http
PUBLIC_TUTORIAL_API_URL=localhost 
```

## package.json ìˆ˜ì • 

package.jsonì€ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •ì´ ë˜ì–´ ìˆìŠµë‹ˆë‹¤. 

```json
	"scripts": {
		"dev": "vite dev",
		"build": "vite build",
		"preview": "vite preview",
	},
```

ê° ìŠ¤í¬ë¦½íŠ¸ë§ˆë‹¤ ì›í•˜ëŠ” ëª¨ë“œë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. 
* ê°œë°œ ë° ë¯¸ë¦¬ë³´ê¸°ì—ì„œ SvelteKitì€ .env íŒŒì¼(ë˜ëŠ” Viteì—ì„œ ê²°ì •í•œ .env.local ë˜ëŠ” .env.[mode])ì—ì„œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì½ìŠµë‹ˆë‹¤.
* vite buildëŠ” ê¸°ë³¸ì ìœ¼ë¡œ production buildë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.  'vite build --mode development' ë¡œ ë¹Œë“œë©ë‹ˆë‹¤.  

```json
	"scripts": {
		"dev": "vite --mode development dev",
		"build": "vite  --mode development build",
		"preview": "vite --mode development preview",
	},
```




## svelte.config.js ìˆ˜ì •
svelte.config.jsì— env ë””ë ‰í† ë¦¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. 
```javascript
const config = {

	kit: {
		version: {
			name: "1.0.0",
			pollInterval: 0  // ê°„ê²©ì€ ë°€ë¦¬ì´ˆ 
		},
		// í™˜ê²½ ì„¤ì • íŒŒì¼ ë””ë ‰í† ë¦¬ 
		env :  {
			dir: "env"
		}
	}
};

export default config;


```

## dotenv ì„¤ì¹˜ 
ìš´ì˜í™˜ê²½ì—ì„œëŠ” .env íŒŒì¼ë“¤ì´ ìë™ì ìœ¼ë¡œ ë¡œë“œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. dotenvë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤. 

```shell
npm install dotenv
```


## .env íŒŒì¼ ë³µì‚¬ 
ìš´ì˜í™˜ê²½ì—ì„œ ê° í™˜ê²½ì— ë§ëŠ” íŒŒì¼ì„ ì½ì„ ìˆ˜ ìˆë„ë¡ env ë””ë ‰í† ë¦¬ë¥¼ ë³µì‚¬í•´ì•¼ í•©ë‹ˆë‹¤. 

ë¨¼ì € vite-plugin-static-copy í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤. 
```shell
npm install -D vite-plugin-static-copy
```
vite.config.ts íŒŒì¼ì„ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í•©ë‹ˆë‹¤. 
```typescript
import { sveltekit } from '@sveltejs/kit/vite';
import { defineConfig } from 'vite';
import { viteStaticCopy } from 'vite-plugin-static-copy';

export default defineConfig({
    plugins: [
    	       sveltekit(),
	       viteStaticCopy({
      targets: [
        {
          // src: '.env.*', // root ì˜ .env.* íŒŒì¼ë“¤ 
          // dest: 'env' //  .svelte-kit/output/envë¡œ ë³µì‚¬ëœë‹¤. 
          src: 'env', // rootì˜ env ë””ë ‰í† ë¦¬ 
          dest: './'  //  .svelte-kit/output/envë¡œ ë³µì‚¬ëœë‹¤. 
        }
      ]
    })
   ],
});
```

ë¹Œë“œí•  ë•Œ ë””í´íŠ¸ë¡œ ì–´ë–¤ ëª¨ë“œ(í™˜ê²½)ì—ì„œ ì‹¤í–‰í• ì§€ package.jsonì„ ìˆ˜ì •í•©ë‹ˆë‹¤. 
```json
"build": "vite --mode development build",
```
ì´ì œ ë¹Œë“œí•©ë‹ˆë‹¤. 
```shell
npm run build
```

## ì„œë²„ ì‹¤í–‰ 

Windows í™˜ê²½ì—ì„œëŠ” ë‹¤ìŒì„ ì‹¤í–‰í•˜ì—¬ Node.js ì„œë²„ë¥¼ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

```shell
$Env:DOTENV_CONFIG_PATH = "./build/client/env/.env.development"; 
               node -r dotenv/config ./build/index.js
```

scripts í´ë” ì•„ë˜ì— ì„œë²„ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” run-server.ps1 íŒŒì¼ì„ ë§Œë“¤ì–´ ë‘ì—ˆìŠµë‹ˆë‹¤.  package.jsonì— ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í–ˆìŠµë‹ˆë‹¤. 
```json
"scripts": {
  "production":"powershell ./scripts/run-server.ps1",
},
```
 ë‹¤ìŒì„ ì‹¤í–‰í•˜ë©´ ë¹Œë“œëœ ì„œë²„ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
 ```shell
 npm run production 
 ```

